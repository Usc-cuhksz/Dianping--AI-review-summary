# 🛡️ 大众点评 AI 差评避雷针 (Dianping AI Review Summarizer)

> **提效而非决策**：帮助用户快速了解餐厅的潜在“雷点”，降低阅读海量差评的认知负担。

## 📖 背景与痛点
在选择餐厅时，用户往往更关注风险（差评），因为这决定了体验的下限。然而，大众点评上的差评数量庞大、观点分散且情绪化严重。用户为了“避雷”，需要花费大量时间逐条阅读，**认知负担极重**。

本项目旨在通过 AI 自动化梳理差评，生成一份客观、结构化的**“避雷报告”**，让用户只需 10 秒钟就能看清 100 条差评里的核心问题。

## 🛠️ 项目介绍
这是一个基于 Python 和 LLM 的自动化 Demo。
我们选取了 **大众点评 - 梨花自主烤肉（雨花万象天地店）** 的前 25 条差评作为样本，利用 **Google Gemini 3 Flash** 模型强大的上下文处理能力，生成可视化的 HTML 报告。

## 📂 文件结构
```text
.
├── data/
│   └── reviews.json       # 原始差评数据（梨花自主烤肉样本）
├── main.ipynb             # 核心逻辑代码 (Jupyter Notebook)
├── report.html            # 最终生成的 AI 差评分析报告
└── readme.md              # 项目说明文档
```
## 🚀 技术实现

### 1) 模型调用
- **模型**：`gemini-3-flash-preview`（通过 API 调用）
- **目标**：将大量差评评论抽取为**结构化槽点 JSON**，用于前端渲染。

---

### 2) 策略：Map–Reduce 分治思想

#### Map 阶段：`chunk_process`
- 将评论列表按 **`chunk_size = 13`** 进行切片：
  - 每个 chunk 独立喂给模型做“槽点抽取 + 分类”
  - 输出为每个 chunk 的结构化片段（建议为 JSON 或接近 JSON 的文本）

> 直觉：让模型每次只处理 13 条，降低上下文压力，提升稳定性与一致性。

#### Reduce 阶段：`aggregate`
- 将所有 chunk 的输出合并：
  - 去重、归并同类项
  - 统一字段命名与格式
  - 汇总比例（如提及率、出现次数）
- 输出为**标准 JSON 结构**（例如 `categories -> items -> evidence_quotes`）。

---

### 3) 输出呈现：移动端交互式卡片（HTML/CSS 渲染）
- 使用 **HTML/CSS 模板**将 JSON 数据渲染成移动端友好的卡片列表
- 核心交互：
  - 默认展示简报（tag + percentage + description）
  - 点击展开查看证据（`evidence_quotes` 引用块）

---

### 4) 输出结果（面向前端）
- **最终产物**：
  1) 一份标准化 JSON（供 UI 渲染）
  2) 基于该 JSON 渲染的移动端交互式卡片页面
